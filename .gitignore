applyStandardAmounts(fees, stdRows);
applyExceptionAmounts(fees, excRows);

// === CHAME O BLOCO FINAL QUE AJUSTA EQUITY/OPTION EM EXCEPTIONS ===
fees.forEach(fee => {
  // Preenche Exception Request de todos os campos 7
  const excGrp = fee.feeGroups?.find(g => g.name === 'Exception Request');
  if (excGrp) {
    excGrp.fields.forEach(field => applyEquityOptionException(field, excRows)); // <-- Ã‰ AQUI
  }
  // Ajusta o label dos campos 7 (Equity/Option) em Standard/Current
  ['Standard Fees', 'Client Current Fees'].forEach(groupName => {
    const group = fee.feeGroups?.find(g => g.name === groupName);
    if (group) {
      group.fields.forEach(field => setEquityOptionLabelValue(field, excRows));
    }
  });
});
