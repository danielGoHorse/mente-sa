// Dentro da classe CustomerFees

#configureCustomer() {
  if (this.#accounts.length < 1) {
    this.#customer = {};
    return;
  }

  // Itera sobre cada field do grupo Client Current Fees
  for (const field of this.#clientCurrent) {
    // Para cada conta associada (não é necessário verificar field.isCurrentClient)
    for (const account of this.#accounts) {
      // Verifica se o field deve ser associado à conta (comparando o código)
      if (field.code === account.feeType) {
        // Regra "NOT APPLICABLE": Se for o campo de Hold Mail Fee (code 2)
        // e se o valor da conta estiver vazio ou "0" e o kycMailingStatus do grupo Standard não for "Hold Mail"
        if (
          field.code === 2 &&
          (!account.feeAmount || account.feeAmount.toString() === '0') &&
          this.#customer.feeGroups[0].kycMailingStatus !== 'Hold Mail'
        ) {
          field.defaultValue = 'NOT APPLICABLE';
          field.labelValue = field.defaultValue;
          field.exceptionOptions = [
            {
              value: field.defaultValue,
              text: field.defaultValue
            }
          ];
        } else {
          // Caso contrário, utiliza o valor vindo da conta
          field.defaultValue = account.feeAmount?.toString() || '';
          field.labelValue = numberToCurrency(field.defaultValue);
        }
      }
    }
  }

  // Atualiza as propriedades comuns (ex: cif e accountNumber) para cada feeGroup
  for (const feeGroup of this.#customer.feeGroups) {
    feeGroup.cif = this.#accounts[0]?.cifno || null;
    feeGroup.accountNumber = this.#accounts[0]?.ddaNumber || null;
  }

  this.#clearMemory();
}
