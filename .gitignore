import Result from '#features/shared/result.js'

import { saveFeePackageBranch } from '#src/models/FeePackageBranch.js'


export default class feePackageBranchSaveUseCase {
  async execute(req) {
    global.logger.info('FeePackageBranchSaveUseCase()')
    const rows = req
    let proccess = false



    for (let i = 0; i < rows.length; i++) {

      let Branch_cd = rows[i].branchCd ?? 0
      let Office_id = rows[i].officerId ?? 0
      let Feegroupid = rows[i].feegroupid ?? 0
      let Busfeegroup_id = rows[i].busfeegroupid ?? null
      let Indfeegroup_id = rows[i].indfeegroupid ?? null
      let Updatedby = req[i].updatedby ?? null
  
      proccess = await saveFeePackageBranch(Branch_cd,
                                            Office_id, 
                                            Feegroupid, 
                                            Busfeegroup_id, 
                                            Indfeegroup_id, 
                                            Updatedby)

      if(proccess === false){
        return Result.fail('Error saving fee package branch')
      }

    }
    return Result.ok(proccess)
  }
}
