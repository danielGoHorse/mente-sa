// app/providers/useHistoryProvider.ts
import { useQuery } from "@tanstack/react-query";
import { HistoryData } from "@/app/store/types";
import historyMock from "@/mocks/historyMock.json";

const fetchHistory = async (requestId?: string): Promise<HistoryData> => {
  // simula delay
  await new Promise((res) => setTimeout(res, 500));
  return historyMock;
};

export function useHistoryProvider(requestId?: string) {
  const query = useQuery<HistoryData>({
    queryKey: ["historyProvider", requestId],
    queryFn: () => fetchHistory(requestId),
    enabled: !!requestId,
    staleTime: 1000 * 60,
  });

  return { query };
}
