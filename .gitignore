// ← depois dos useStates e antes do if (!data) return null;
const docsHydratedRef = React.useRef(false);

useEffect(() => {
  if (docsHydratedRef.current) return;                           // já hidratei
  const paths: string[] | undefined = data?.documents?.content;  // vem do getRequestConfig

  if (!paths || !paths.length) return;                           // nada pra hidratar

  const docs: UploadedDocument[] = paths.map((p) => {
    const [uuid, ...rest] = p.split("/");
    return {
      serverPath: p,
      documentUUID: uuid,
      documentName: rest.join("/"),
      uploadedBy: { fullName: data.createdBy, userId: data.createdBy },
      createdAt: data.createdAt ?? new Date().toISOString(),
      documentStatus: "uploaded",
    };
  });

  setDocumentList(docs);
  docsHydratedRef.current = true;
}, [data, setDocumentList]);
