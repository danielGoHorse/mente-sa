function mergeEquityOptionText(field, originalCode, text) {
  // _eqVal e _opVal serão campos internos usados só para construir a string final
  if (field._eqVal === undefined) field._eqVal = '';
  if (field._opVal === undefined) field._opVal = '';

  if (originalCode === 9) {
    // BPS004 -> equidade
    field._eqVal = text;
  } else {
    // BPS005 -> opção
    field._opVal = text;
  }

  // Concatena final
  field.defaultValue = `Equity: ${field._eqVal} ; Option: ${field._opVal}`;
}

>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

// Supõe que row => { FeeDescription, FeeCode, FeeAmount, Frequency, ... }
// Mapeia code
let mappedCode = deParaFeeCodes[FeeCode] || FeeCode;

// Exclui se estiver no excludedCodes
if (excludedCodes.has(mappedCode)) continue;

// Se code é 9 ou 7 => unifica em 7
let originalCode = mappedCode; 
if (mappedCode === 9 || mappedCode === 7) {
  mappedCode = 7;
}

// Localiza ou cria o campo no Standard Fees
let standardField = standardGroup.fields.find((f) => f.code === mappedCode);
if (!standardField) {
  standardField = {
    code: mappedCode,
    name: FeeDescription,
    defaultValue: '',
    tooltip: '',
    isException: false,
  };
  standardGroup.fields.push(standardField);
}

// Se code=7 => name => "Equity and Options Commission"
if (mappedCode === 7) {
  standardField.name = "Equity and Options Commission";
  // Em FeeAmount vem o texto extenso, ex: "$0.10 per share, min charge of $150 per trade"
  mergeEquityOptionText(standardField, originalCode, FeeAmount?.toString() || '');
} else {
  // Caso normal
  standardField.defaultValue = FeeAmount ? FeeAmount.toString() : '';
  standardField.tooltip = Frequency || '';
  standardField.name = FeeDescription;
}

// Análogo para Client Current Fees
let clientField = clientCurrentGroup.fields.find((f) => f.code === mappedCode);
if (!clientField) {
  clientField = {
    code: mappedCode,
    name: FeeDescription,
    defaultValue: '',
    tooltip: '',
    isException: false
  };
  clientCurrentGroup.fields.push(clientField);
}

if (mappedCode === 7) {
  clientField.name = "Equity and Options Commission";
  mergeEquityOptionText(clientField, originalCode, DefaultFeeAmount?.toString() || '');
} else {
  clientField.defaultValue = DefaultFeeAmount ? DefaultFeeAmount.toString() : '';
  clientField.tooltip = DefaultFrequency || '';
  clientField.name = FeeDescription;
}

>>>>>>>>>>>>>>>>>>>>>>


if (originalCode === 9 || originalCode === 7) {
  // code => 7
  field.name = "Equity and Options Commission";
  mergeEquityOptionText(field, originalCode, exc.defaultValue);
}
>>>>>>>>>>>>>>>>>>>>>>
