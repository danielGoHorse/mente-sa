import BaseHttp from './BaseHttp.js';

export default class Customer extends BaseHttp {
  #getCustomerDetails = 'customer/v1';

  constructor({ logger, environment }) {
    super(logger, environment.customerUrl);
    console.log("🔹 Customer Base URL:", environment.customerUrl);
  }

  async getCustomerDetailsByCif(cif) {
    if (!this.baseUrl) {
      console.error("❌ Erro: Base URL não está definida!");
      throw new Error("Base URL não definida para Customer.");
    }

    const url = `${this.baseUrl}/${this.#getCustomerDetails}/${cif}`;
    console.log("🔹 URL do Customer gerada:", url);

    try {
      const [error, response] = await this.httpRequest.get(url);
      if (error) {
        console.error("❌ Erro ao buscar detalhes do cliente:", error);
        return [error, null];
      }
      return [null, response];
    } catch (err) {
      console.error("❌ Exceção ao chamar a API do Customer:", err.message);
      return [err.message, null];
    }
  }
}
