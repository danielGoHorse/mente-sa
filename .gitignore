/* ───────────── Ajuste Client-Current (custody + equity/option) ────────── */
function patchClientCurrent(customerAccount, feesArr) {
  const invFee = feesArr.find(f => f.feeType === 'Investment Account Fees');
  if (!invFee) return;

  const currGrp = invFee.feeGroups?.find(g => g.name === 'Client Current Fees');
  const stdGrp  = invFee.feeGroups?.find(g => g.name === 'Standard Fees');
  if (!currGrp || !stdGrp) return;

  /* ---------- custody (code 6) ---------------------------------------- */
  const custodyAcc = customerAccount.find(a => a.feeType === 6);
  if (custodyAcc) {
    const fldCurr6 = currGrp.fields.find(f => f.code === 6);
    if (fldCurr6) {
      fldCurr6.defaultValue = custodyAcc.feeCode;               // A053 …
      fldCurr6.labelValue   = numberToCurrency(custodyAcc.feeAmount);
    }
  }

  /* ---------- equity / option (code 7) -------------------------------- */
  const fldStd7  = stdGrp.fields .find(f => f.code === 7);      // texto completo
  const fldCurr7 = currGrp.fields.find(f => f.code === 7);
  if (fldStd7 && fldCurr7 && !fldCurr7.labelValue) {            // só se vazio
    fldCurr7.defaultValue = fldStd7.defaultValue;               // “E3”, “B6” …
    fldCurr7.labelValue   = fldStd7.labelValue;                 // “E3 – Equity:…”
  }
}
