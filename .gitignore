const rawCustomerAccounts = customerData?.customerAccount || []; 

// Log dos valores antes do filtro
console.log("Raw Customer Accounts:", rawCustomerAccounts);

const filteredCustomerAccounts = rawCustomerAccounts.filter(fee => {
  console.log("Checking feeType:", fee.feeType); // Debug do feeType
  return ["Customer Fees", "Bank Account Fees", "Investment Account Fees"].includes(fee.feeType);
});

// Log para ver se algum dado foi filtrado
console.log("Filtered Customer Accounts:", filteredCustomerAccounts);

const formattedFees = filteredCustomerAccounts.map(fee => ({
  feeGroups: [{
    name: fee.feeGroup === 1 ? "Client Current Fees" : "Standard Fees",
    visible: true,
    kycMailingStatus: fee.kycMailingStatus || null,
    code: fee.feeCode,
    accountNumber: fee.ddaNumber || '',
    cif: fee.cifno,
    id: '',
    fields: [{
      hasChanged: false,
      code: fee.feeCode, // Ajustado para referenciar corretamente o c√≥digo da taxa
      name: formatCamelCaseToTitle(fee.feeDescription),
      defaultValue: fee.feeAmount?.toString() || '',
      isStandard: fee.isFeesStandard === "Yes",
      isException: fee.isFeesStandard === "No",
      isCurrentClient: false,
      labelValue: fee.feeAmount ? `$${fee.feeAmount.toFixed(2)}` : '',
      tooltip: fee.source ? `Source: ${fee.source}` : '',
      exceptionOptions: [],
      createdAt: timestamp,
      updatedAt: timestamp,
      id: fee.ddaNumber.toString()
    }]
  }],
  feeType: fee.feeType,
  id: '',
}));

console.log("Final formattedFees:", formattedFees);
